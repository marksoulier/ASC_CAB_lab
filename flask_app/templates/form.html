<!-- form.html -->
<div class="form-container">
    <form id="uploadForm" action="/upload" method="post" enctype="multipart/form-data">
        <div class="file-upload-container">
            <input type="file" name="file" id="file" style="display: none;" onchange="updateFileName()">
            <label for="file" class="file-label">Choose File</label>
            <span id="file-name" class="file-name"></span>
        </div>
        <button type="submit" class="upload-btn">Upload File</button>
    </form>
</div>

<script>
function updateFileName() {
    var input = document.getElementById('file');
    var fileNameSpan = document.getElementById('file-name');
    var fileName = input.value.split('\\').pop(); // Extract the file name from the path
    fileNameSpan.textContent = fileName; // Display the file name
}
</script>
<hr>
<h2>Uploaded File Categories</h2>
<div id="file-categories">
    {% if file_counts %}
        <p>Content files: {{ file_counts.get('content', 0) }}</p>
        <p>Data files: {{ file_counts.get('data', 0) }}</p>
        <p>Other files: {{ file_counts.get('other', 0) }}</p>
        
        <h3>Sample Files</h3>
        {% for category, files in file_categories.items() %}
            <h4>{{ category.capitalize() }} Files</h4>
            <ul>
                {% for file in files %}
                    <li>{{ file }}</li>
                {% endfor %}
            </ul>
        {% endfor %}
    {% endif %}
</div>
<hr>

<h2>Execute Video Creation</h2>
<form id="toggleForm">
    <label>
        GSR:
        <input type="checkbox" name="GSR" id="GSR">
    </label><br>
    <label>
        FACET:
        <input type="checkbox" name="FACET" id="FACET">
    </label><br>
    <label>
        Pupil:
        <input type="checkbox" name="Pupil" id="Pupil">
    </label><br>
    <label>
        HeartRate:
        <input type="checkbox" name="HeartRate" id="HeartRate">
    </label><br>
    <label>
        graph:
        <input type="checkbox" name="graph" id="graph">
    </label><br>
    <label>
        save:
        <input type="checkbox" name="save" id="save">
    </label><br>
    <label>
        show:
        <input type="checkbox" name="show" id="show">
    </label><br>
    <label>
        eye_tracking:
        <input type="checkbox" name="eye_tracking" id="eye_tracking">
    </label><br>
    <button type="button" onclick="execute()">Create Video</button>
</form>
<script>
    function execute() {
        var formData = new FormData();
        formData.append('GSR', document.getElementById('GSR').checked ? 'True' : 'False');
        formData.append('FACET', document.getElementById('FACET').checked ? 'True' : 'False');
        formData.append('Pupil', document.getElementById('Pupil').checked ? 'True' : 'False');
        formData.append('HeartRate', document.getElementById('HeartRate').checked ? 'True' : 'False');
        formData.append('graph', document.getElementById('graph').checked ? 'True' : 'False');
        formData.append('save', document.getElementById('save').checked ? 'True' : 'False');
        formData.append('show', document.getElementById('show').checked ? 'True' : 'False');
        formData.append('eye_tracking', document.getElementById('eye_tracking').checked ? 'True' : 'False');
        
        fetch('/execute', {
            method: 'POST',
            body: formData
        })
        .then(response => response.text())
        .then(data => console.log(data))
        .catch(error => console.error('Error:', error));
    }
</script>
